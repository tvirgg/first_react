{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n/* eslint-disable @typescript-eslint/no-empty-function */\n\n\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useImperativeHandle, useMemo } from 'react';\nimport ListOption from './ListOption';\nimport ListOptionGroup from './ListOptionGroup';\nimport { useMessagesWithDefaults } from './messages'; // import { WidgetHTMLProps } from './shared'\n\nimport * as CustomPropTypes from './PropTypes';\nimport { groupBySortedKeys, makeArray, toItemArray } from './_';\nimport { useInstanceId } from './WidgetHelpers';\nimport useMutationObserver from '@restart/hooks/useMutationObserver';\nimport useCallbackRef from '@restart/hooks/useCallbackRef';\nimport useMergedRefs from '@restart/hooks/useMergedRefs';\nconst whitelist = ['style', 'className', 'role', 'id', 'autocomplete', 'size', 'tabIndex', 'maxLength', 'name'];\nconst whitelistRegex = [/^aria-/, /^data-/, /^on[A-Z]\\w+/];\n\nfunction pickElementProps(props) {\n  const result = {};\n  Object.keys(props).forEach(key => {\n    if (whitelist.indexOf(key) !== -1 || whitelistRegex.some(r => !!key.match(r))) result[key] = props[key];\n  });\n  return result;\n}\n\nconst propTypes = {\n  data: PropTypes.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: PropTypes.func,\n  onMove: PropTypes.func,\n  onHoverOption: PropTypes.func,\n  optionComponent: PropTypes.elementType,\n  renderItem: PropTypes.func,\n  renderGroup: PropTypes.func,\n  focusedItem: PropTypes.any,\n  selectedItem: PropTypes.any,\n  searchTerm: PropTypes.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: PropTypes.shape({\n    emptyList: PropTypes.func.isRequired\n  })\n};\nexport const useScrollFocusedIntoView = (element, observeChanges = false) => {\n  const scrollIntoView = useCallback(() => {\n    if (!element) return;\n    let selectedItem = element.querySelector('[data-rw-focused]');\n\n    if (selectedItem && selectedItem.scrollIntoView) {\n      selectedItem.scrollIntoView({\n        block: 'nearest',\n        inline: 'nearest'\n      });\n    }\n  }, [element]);\n  useMutationObserver(observeChanges ? element : null, {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['data-rw-focused']\n  }, scrollIntoView);\n  return scrollIntoView;\n};\nexport function useHandleSelect(multiple, dataItems, onChange) {\n  return (dataItem, event) => {\n    if (multiple === false) {\n      onChange(dataItem, {\n        dataItem,\n        lastValue: dataItems[0],\n        originalEvent: event\n      });\n      return;\n    }\n\n    const checked = dataItems.includes(dataItem);\n    onChange(checked ? dataItems.filter(d => d !== dataItem) : [...dataItems, dataItem], {\n      dataItem,\n      lastValue: dataItems,\n      action: checked ? 'remove' : 'insert',\n      originalEvent: event\n    });\n  };\n}\nconst List = /*#__PURE__*/React.forwardRef(function List(_ref, outerRef) {\n  var _elementProps$role;\n\n  let {\n    multiple = false,\n    data = [],\n    value,\n    onChange,\n    accessors,\n    className,\n    messages,\n    disabled,\n    renderItem,\n    renderGroup,\n    searchTerm,\n    groupBy,\n    elementRef,\n    optionComponent: Option = ListOption\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"multiple\", \"data\", \"value\", \"onChange\", \"accessors\", \"className\", \"messages\", \"disabled\", \"renderItem\", \"renderGroup\", \"searchTerm\", \"groupBy\", \"elementRef\", \"optionComponent\"]);\n\n  const id = useInstanceId();\n  const dataItems = makeArray(value, multiple);\n  const groupedData = useMemo(() => groupBy ? groupBySortedKeys(groupBy, data) : undefined, [data, groupBy]);\n  const [element, ref] = useCallbackRef();\n  const disabledItems = toItemArray(disabled);\n  const {\n    emptyList\n  } = useMessagesWithDefaults(messages);\n  const divRef = useMergedRefs(ref, elementRef);\n  const handleSelect = useHandleSelect(multiple, dataItems, onChange);\n  const scrollIntoView = useScrollFocusedIntoView(element, true);\n  let elementProps = pickElementProps(props);\n  useImperativeHandle(outerRef, () => ({\n    scrollIntoView\n  }), [scrollIntoView]);\n\n  function renderOption(item, idx) {\n    const textValue = accessors.text(item);\n    const itemIsDisabled = disabledItems.includes(item);\n    const itemIsSelected = dataItems.includes(item);\n    return /*#__PURE__*/React.createElement(Option, {\n      dataItem: item,\n      key: `item_${idx}`,\n      onSelect: handleSelect,\n      disabled: itemIsDisabled,\n      selected: itemIsSelected\n    }, renderItem ? renderItem({\n      item,\n      searchTerm,\n      index: idx,\n      text: textValue,\n      // TODO: probably remove\n      value: accessors.value(item),\n      disabled: itemIsDisabled\n    }) : textValue);\n  }\n\n  const children = groupedData ? groupedData.map(([group, items], idx) => /*#__PURE__*/React.createElement(\"div\", {\n    role: \"group\",\n    key: `group_${idx}`\n  }, /*#__PURE__*/React.createElement(ListOptionGroup, null, renderGroup ? renderGroup({\n    group\n  }) : group), items.map(renderOption))) : data.map(renderOption);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: id,\n    tabIndex: 0,\n    ref: divRef\n  }, elementProps, {\n    \"aria-multiselectable\": !!multiple,\n    className: cn(className, 'rw-list'),\n    role: (_elementProps$role = elementProps.role) != null ? _elementProps$role : 'listbox'\n  }), React.Children.count(children) ? children : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rw-list-empty\"\n  }, emptyList()));\n});\nList.displayName = 'List';\nList.propTypes = propTypes;\nexport default List;","map":{"version":3,"sources":["C:/Users/Kainar_malay/Desktop/git_partfolio/kainar_present/first_react/node_modules/react-widgets/esm/List.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","cn","PropTypes","React","useCallback","useImperativeHandle","useMemo","ListOption","ListOptionGroup","useMessagesWithDefaults","CustomPropTypes","groupBySortedKeys","makeArray","toItemArray","useInstanceId","useMutationObserver","useCallbackRef","useMergedRefs","whitelist","whitelistRegex","pickElementProps","props","result","forEach","some","r","match","propTypes","data","array","dataKey","accessor","textField","onSelect","func","onMove","onHoverOption","optionComponent","elementType","renderItem","renderGroup","focusedItem","any","selectedItem","searchTerm","string","disabled","acceptsArray","messages","shape","emptyList","isRequired","useScrollFocusedIntoView","element","observeChanges","scrollIntoView","querySelector","block","inline","subtree","attributes","attributeFilter","useHandleSelect","multiple","dataItems","onChange","dataItem","event","lastValue","originalEvent","checked","includes","filter","d","action","List","forwardRef","_ref","outerRef","_elementProps$role","value","accessors","className","groupBy","elementRef","Option","id","groupedData","undefined","ref","disabledItems","divRef","handleSelect","elementProps","renderOption","item","idx","textValue","text","itemIsDisabled","itemIsSelected","createElement","selected","index","children","map","group","items","role","tabIndex","Children","count","displayName"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useImperativeHandle, useMemo } from 'react';\nimport ListOption from './ListOption';\nimport ListOptionGroup from './ListOptionGroup';\nimport { useMessagesWithDefaults } from './messages'; // import { WidgetHTMLProps } from './shared'\n\nimport * as CustomPropTypes from './PropTypes';\nimport { groupBySortedKeys, makeArray, toItemArray } from './_';\nimport { useInstanceId } from './WidgetHelpers';\nimport useMutationObserver from '@restart/hooks/useMutationObserver';\nimport useCallbackRef from '@restart/hooks/useCallbackRef';\nimport useMergedRefs from '@restart/hooks/useMergedRefs';\nconst whitelist = ['style', 'className', 'role', 'id', 'autocomplete', 'size', 'tabIndex', 'maxLength', 'name'];\nconst whitelistRegex = [/^aria-/, /^data-/, /^on[A-Z]\\w+/];\n\nfunction pickElementProps(props) {\n  const result = {};\n  Object.keys(props).forEach(key => {\n    if (whitelist.indexOf(key) !== -1 || whitelistRegex.some(r => !!key.match(r))) result[key] = props[key];\n  });\n  return result;\n}\n\nconst propTypes = {\n  data: PropTypes.array,\n  dataKey: CustomPropTypes.accessor,\n  textField: CustomPropTypes.accessor,\n  onSelect: PropTypes.func,\n  onMove: PropTypes.func,\n  onHoverOption: PropTypes.func,\n  optionComponent: PropTypes.elementType,\n  renderItem: PropTypes.func,\n  renderGroup: PropTypes.func,\n  focusedItem: PropTypes.any,\n  selectedItem: PropTypes.any,\n  searchTerm: PropTypes.string,\n  disabled: CustomPropTypes.disabled.acceptsArray,\n  messages: PropTypes.shape({\n    emptyList: PropTypes.func.isRequired\n  })\n};\nexport const useScrollFocusedIntoView = (element, observeChanges = false) => {\n  const scrollIntoView = useCallback(() => {\n    if (!element) return;\n    let selectedItem = element.querySelector('[data-rw-focused]');\n\n    if (selectedItem && selectedItem.scrollIntoView) {\n      selectedItem.scrollIntoView({\n        block: 'nearest',\n        inline: 'nearest'\n      });\n    }\n  }, [element]);\n  useMutationObserver(observeChanges ? element : null, {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['data-rw-focused']\n  }, scrollIntoView);\n  return scrollIntoView;\n};\nexport function useHandleSelect(multiple, dataItems, onChange) {\n  return (dataItem, event) => {\n    if (multiple === false) {\n      onChange(dataItem, {\n        dataItem,\n        lastValue: dataItems[0],\n        originalEvent: event\n      });\n      return;\n    }\n\n    const checked = dataItems.includes(dataItem);\n    onChange(checked ? dataItems.filter(d => d !== dataItem) : [...dataItems, dataItem], {\n      dataItem,\n      lastValue: dataItems,\n      action: checked ? 'remove' : 'insert',\n      originalEvent: event\n    });\n  };\n}\nconst List = /*#__PURE__*/React.forwardRef(function List(_ref, outerRef) {\n  var _elementProps$role;\n\n  let {\n    multiple = false,\n    data = [],\n    value,\n    onChange,\n    accessors,\n    className,\n    messages,\n    disabled,\n    renderItem,\n    renderGroup,\n    searchTerm,\n    groupBy,\n    elementRef,\n    optionComponent: Option = ListOption\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"multiple\", \"data\", \"value\", \"onChange\", \"accessors\", \"className\", \"messages\", \"disabled\", \"renderItem\", \"renderGroup\", \"searchTerm\", \"groupBy\", \"elementRef\", \"optionComponent\"]);\n\n  const id = useInstanceId();\n  const dataItems = makeArray(value, multiple);\n  const groupedData = useMemo(() => groupBy ? groupBySortedKeys(groupBy, data) : undefined, [data, groupBy]);\n  const [element, ref] = useCallbackRef();\n  const disabledItems = toItemArray(disabled);\n  const {\n    emptyList\n  } = useMessagesWithDefaults(messages);\n  const divRef = useMergedRefs(ref, elementRef);\n  const handleSelect = useHandleSelect(multiple, dataItems, onChange);\n  const scrollIntoView = useScrollFocusedIntoView(element, true);\n  let elementProps = pickElementProps(props);\n  useImperativeHandle(outerRef, () => ({\n    scrollIntoView\n  }), [scrollIntoView]);\n\n  function renderOption(item, idx) {\n    const textValue = accessors.text(item);\n    const itemIsDisabled = disabledItems.includes(item);\n    const itemIsSelected = dataItems.includes(item);\n    return /*#__PURE__*/React.createElement(Option, {\n      dataItem: item,\n      key: `item_${idx}`,\n      onSelect: handleSelect,\n      disabled: itemIsDisabled,\n      selected: itemIsSelected\n    }, renderItem ? renderItem({\n      item,\n      searchTerm,\n      index: idx,\n      text: textValue,\n      // TODO: probably remove\n      value: accessors.value(item),\n      disabled: itemIsDisabled\n    }) : textValue);\n  }\n\n  const children = groupedData ? groupedData.map(([group, items], idx) => /*#__PURE__*/React.createElement(\"div\", {\n    role: \"group\",\n    key: `group_${idx}`\n  }, /*#__PURE__*/React.createElement(ListOptionGroup, null, renderGroup ? renderGroup({\n    group\n  }) : group), items.map(renderOption))) : data.map(renderOption);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: id,\n    tabIndex: 0,\n    ref: divRef\n  }, elementProps, {\n    \"aria-multiselectable\": !!multiple,\n    className: cn(className, 'rw-list'),\n    role: (_elementProps$role = elementProps.role) != null ? _elementProps$role : 'listbox'\n  }), React.Children.count(children) ? children : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rw-list-empty\"\n  }, emptyList()));\n});\nList.displayName = 'List';\nList.propTypes = propTypes;\nexport default List;"]},"metadata":{},"sourceType":"module"}